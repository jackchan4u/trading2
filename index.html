<!doctype html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>PulseBoard Mercado</title>
    <link rel="stylesheet" href="styles.css" />
  </head>
  <body>
    <div class="page">
      <header class="hero">
        <div class="hero__text">
          <p class="eyebrow">Mercados en tiempo real</p>
          <h1>PulseBoard</h1>
          <p class="lead">
            Panel de seguimiento para acciones y crypto con refresco automatico.
          </p>
          <div class="badges">
            <span class="badge">Acciones: Twelve Data</span>
            <span class="badge">Cripto: Binance</span>
            <span class="badge">Auto refresco</span>
          </div>
        </div>
        <div class="hero__panel">
          <div class="panel">
            <h2>Configuracion</h2>
            <div class="hint">
              La clave se guarda en el servidor local. Para cumplir el plan
              basico de Twelve Data, las acciones se actualizan por bloques y
              el intervalo minimo de acciones es 120s.
              Cripto funciona sin clave.
            </div>
            <div class="field-row">
              <label class="field">
                <span>Intervalo acciones (s)</span>
                <input id="stockInterval" type="number" min="120" step="10" />
              </label>
              <label class="field">
                <span>Intervalo cripto (s)</span>
                <input id="cryptoInterval" type="number" min="5" step="5" />
              </label>
            </div>
            <button id="applySettings" class="primary">Aplicar</button>
            <div class="field-row">
              <a
                id="openMobileLink"
                class="ghost"
                href="#"
                target="_blank"
                rel="noopener"
              >
                Abrir en movil
              </a>
              <span id="mobileUrl" class="hint"></span>
            </div>
          </div>
          <div class="status">
            <div class="status__row">
              <span class="dot dot--live"></span>
              <span id="stockStatus">Acciones en espera</span>
            </div>
            <div class="status__row">
              <span class="dot dot--live"></span>
              <span id="cryptoStatus">Cripto en espera</span>
            </div>
            <div class="timestamp">
              Ultima actualizacion: <span id="lastUpdated">--</span>
            </div>
          </div>
        </div>
      </header>

      <main class="grid">
        <section class="card">
          <div class="card__header">
            <h2>Acciones</h2>
            <div class="card__actions">
              <select id="stockFilter" class="select">
                <option value="all">Todos</option>
                <option value="gainers">Ganadores</option>
                <option value="losers">Perdedores</option>
                <option value="top5">Top 5</option>
                <option value="bottom5">Peor 5</option>
              </select>
            </div>
          </div>
          <div class="table">
            <div class="row head stocks">
              <div>Simbolo</div>
              <div>Precio</div>
              <div>Variacion</div>
              <div>RSI</div>
              <div>MACD</div>
              <div>Sesion</div>
              <div>Actualizado</div>
            </div>
            <div id="stocksBody" class="body"></div>
          </div>
        </section>

        <section class="card">
          <div class="card__header">
            <h2>Cripto</h2>
            <div class="card__actions">
              <select id="cryptoFilter" class="select">
                <option value="all">Todos</option>
                <option value="gainers">Ganadores</option>
                <option value="losers">Perdedores</option>
                <option value="top5">Top 5</option>
                <option value="bottom5">Peor 5</option>
              </select>
            </div>
          </div>
          <div class="table">
            <div class="row head crypto">
              <div>Par</div>
              <div>Precio</div>
              <div>Variacion</div>
              <div>RSI</div>
              <div>MACD</div>
              <div>Actualizado</div>
            </div>
            <div id="cryptoBody" class="body"></div>
          </div>
        </section>
      </main>

      <section class="grid secondary">
        <section class="card">
          <div class="card__header">
            <h2>Notas de Prensa</h2>
            <span class="tag">Todas</span>
          </div>
          <div id="pressList" class="list"></div>
        </section>

        <section class="card">
          <div class="card__header">
            <h2>Informes SEC</h2>
            <span class="tag">Todos</span>
          </div>
          <div id="filingsList" class="list"></div>
        </section>

        <section class="card">
          <div class="card__header">
            <h2>Noticias</h2>
            <span class="tag">Todas</span>
          </div>
          <div id="newsList" class="list"></div>
        </section>

        <section class="card">
          <div class="card__header">
            <h2>Notas de Prensa (Cripto)</h2>
            <span class="tag">Cripto</span>
          </div>
          <div id="cryptoPressList" class="list"></div>
        </section>

        <section class="card">
          <div class="card__header">
            <h2>Noticias (Cripto)</h2>
            <span class="tag">Cripto</span>
          </div>
          <div id="cryptoNewsList" class="list"></div>
        </section>

        <section class="card">
          <div class="card__header">
            <h2>Alertas</h2>
            <span class="tag">Ruptura</span>
          </div>
          <form id="alertForm" class="alert-form">
            <label class="field">
              <span>Activo</span>
              <select id="alertSymbol" class="select"></select>
            </label>
            <label class="field">
              <span>Nivel</span>
              <input id="alertLevel" type="number" step="0.0001" />
            </label>
            <label class="field">
              <span>Direccion</span>
              <select id="alertDirection" class="select">
                <option value="above">Ruptura al alza</option>
                <option value="below">Ruptura a la baja</option>
              </select>
            </label>
            <button class="primary" type="submit">Crear alerta</button>
          </form>
          <div id="alertsList" class="list alerts"></div>
        </section>
      </section>

      <footer class="foot">
        <p>
          Nota: los precios se actualizan de forma periodica y pueden estar
          sujetos a limites de API. Para acciones se usa Twelve Data. El estado
          de sesion se calcula con el horario NYSE (sin festivos). RSI y MACD
          se calculan con el historico local que se va acumulando en el
          navegador. Informes via SEC (requiere User-Agent con contacto en
          config.json) y noticias via Yahoo Finance RSS.
        </p>
      </footer>
    </div>
    <script src="app.js"></script>
  </body>
</html>
